{
    "version": "https://jsonfeed.org/version/1",
    "title": "Hacking to the gate! • All posts by \"iis7\" tag",
    "description": "Bipedal Bit's blog",
    "home_page_url": "https://blog.bipedalbit.net",
    "items": [
        {
            "id": "https://blog.bipedalbit.net/2015/05/03/win-Linux%E4%B8%8B%E5%8E%BB%E6%8E%89codeigniter%E6%A1%86%E6%9E%B6%E7%BD%91%E7%AB%99URL%E4%B8%AD%E7%9A%84index-php/",
            "url": "https://blog.bipedalbit.net/2015/05/03/win-Linux%E4%B8%8B%E5%8E%BB%E6%8E%89codeigniter%E6%A1%86%E6%9E%B6%E7%BD%91%E7%AB%99URL%E4%B8%AD%E7%9A%84index-php/",
            "title": "win/Linux下去掉codeigniter框架网站URL中的index.php",
            "date_published": "2015-05-03T04:31:20.000Z",
            "content_html": "<p>&nbsp;&nbsp;&nbsp; 使用PHP的codeigniter框架后在试验阶段遇到的第一个问题就是，无法隐藏地址栏中的index.php，这让我浑身难受。多方调查之后有了一套解决方案。</p>\n<span id=\"more\"></span>\n<h1 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux:\"></a>Linux:</h1><h2 id=\"一-Apache\"><a href=\"#一-Apache\" class=\"headerlink\" title=\"一.Apache\"></a>一.Apache</h2><h3 id=\"1-启用rewrite模块\"><a href=\"#1-启用rewrite模块\" class=\"headerlink\" title=\"1.启用rewrite模块\"></a>1.启用rewrite模块</h3><p>&nbsp;&nbsp;&nbsp; 手动启用是在Apache配置文件里把“LoadModule rewrite_module modules&#x2F;mod_rewrite.so”解注释。<br>&nbsp;&nbsp;&nbsp; 一些LAMP套件也提供更方便的模块管理。</p>\n<h3 id=\"2-rewrite规则设置\"><a href=\"#2-rewrite规则设置\" class=\"headerlink\" title=\"2.rewrite规则设置\"></a>2.rewrite规则设置</h3><p>&nbsp;&nbsp;&nbsp; 在 CI 的根目录下，即在 index.php ，system的同级目录下，建立.htaccess，直接建立该文件名不会成功，可以从application或system文件夹里复制一个过来，再修改内容。<br>&nbsp;&nbsp;&nbsp; 内容如下（ CI 手册上也有介绍）：</p>\n<pre><code class=\"hljs\">RewriteEngine On\nRewriteCond %&#123;REQUEST_FILENAME&#125; !-f\nRewriteCond %&#123;REQUEST_FILENAME&#125; !-d\nRewriteRule ^(.*)$ index.php/$1 [L]\n</code></pre>\n<p>&nbsp;&nbsp;&nbsp; <strong>如果.htaccess文件不是在www的根目录下，例如是： <a href=\"http://localhost/123/\">http://localhost/123/</a> index.php ，第三行需要改写为</strong><br>&nbsp;&nbsp;&nbsp; <code>RewriteRule ^(.*)$ /123/ index.php /$1 [L]</code></p>\n<h3 id=\"3-配置codeigniter\"><a href=\"#3-配置codeigniter\" class=\"headerlink\" title=\"3.配置codeigniter\"></a>3.配置codeigniter</h3><p>&nbsp;&nbsp;&nbsp; 找到CI文件夹&#x2F;application&#x2F;config&#x2F;config.php。<br>&nbsp;&nbsp;&nbsp; <code>$config[&#39;index_page&#39;] =&quot; index.php &quot;;</code>改写成<code>$config[&#39;index_page&#39;] = &quot;&quot;; </code></p>\n<h3 id=\"4-重启Apache\"><a href=\"#4-重启Apache\" class=\"headerlink\" title=\"4.重启Apache\"></a>4.重启Apache</h3><p>&nbsp;&nbsp;&nbsp; 这个各显神通，不累述，如Ubuntu的<code> $ sudo /etc/init.d/apache2 restart</code></p>\n<h2 id=\"二-nginx\"><a href=\"#二-nginx\" class=\"headerlink\" title=\"二.nginx\"></a>二.nginx</h2><h3 id=\"1-rewrite规则设置\"><a href=\"#1-rewrite规则设置\" class=\"headerlink\" title=\"1.rewrite规则设置\"></a>1.rewrite规则设置</h3><p>&nbsp;&nbsp;&nbsp; 修改nginx配置文件，在nginx.conf的SERVER段中添加如下代码：</p>\n<pre><code class=\"hljs\">location /&#123;\n   if (-f $request_filename) &#123;\n       expires max;\n       break;\n   &#125;\n   if (!-e $request_filename) &#123;\n       rewrite ^/(.*)$ /index.php/$1 last;\n   &#125;\n&#125;\n</code></pre>\n<h3 id=\"2-3同上\"><a href=\"#2-3同上\" class=\"headerlink\" title=\"2.3同上\"></a>2.3同上</h3><h3 id=\"4-重启nginx\"><a href=\"#4-重启nginx\" class=\"headerlink\" title=\"4.重启nginx\"></a>4.重启nginx</h3><p>&nbsp;&nbsp;&nbsp; <code>/usr/local/nginx/sbin/nginx -s reload</code></p>\n<h1 id=\"Windows：\"><a href=\"#Windows：\" class=\"headerlink\" title=\"Windows：\"></a>Windows：</h1><h2 id=\"一-IIS7\"><a href=\"#一-IIS7\" class=\"headerlink\" title=\"一.IIS7\"></a>一.IIS7</h2><h3 id=\"1-配置web-config\"><a href=\"#1-配置web-config\" class=\"headerlink\" title=\"1.配置web.config\"></a>1.配置web.config</h3><pre><code class=\"hljs\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration&gt;\n    &lt;system.webServer&gt;\n        &lt;rewrite&gt;\n            &lt;rules&gt;\n                &lt;rule name=&quot;OrgPage&quot; stopProcessing=&quot;true&quot;&gt;\n                    &lt;match url=&quot;^(.*)$&quot; /&gt;\n                    &lt;conditions logicalGrouping=&quot;MatchAll&quot;&gt;\n                    &lt;add input=&quot;&#123;HTTP_HOST&#125;&quot; pattern=&quot;^(.*)$&quot; /&gt;\n                    &lt;add input=&quot;&#123;REQUEST_FILENAME&#125;&quot; matchType=&quot;IsFile&quot; negate=&quot;true&quot; /&gt;\n                    &lt;add input=&quot;&#123;REQUEST_FILENAME&#125;&quot; matchType=&quot;IsDirectory&quot; negate=&quot;true&quot; /&gt;\n                    &lt;/conditions&gt;\n                    &lt;action type=&quot;Rewrite&quot; url=&quot;index.php/&#123;R:1&#125;&quot; /&gt;\n                &lt;/rule&gt;\n            &lt;/rules&gt;\n        &lt;/rewrite&gt;\n    &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n<h3 id=\"2-配置codeigniter\"><a href=\"#2-配置codeigniter\" class=\"headerlink\" title=\"2.配置codeigniter\"></a>2.配置codeigniter</h3><p>&nbsp;&nbsp;&nbsp; 找到CI文件夹&#x2F;application&#x2F;config&#x2F;config.php。<br>&nbsp;&nbsp;&nbsp; <code>$config[&#39;index_page&#39;] =&quot; index.php &quot;;</code>改写成<code>$config[&#39;index_page&#39;] = &quot;&quot;; </code></p>\n<h2 id=\"二-Apache\"><a href=\"#二-Apache\" class=\"headerlink\" title=\"二.Apache\"></a>二.Apache</h2><h3 id=\"1-启用rewrite模块-1\"><a href=\"#1-启用rewrite模块-1\" class=\"headerlink\" title=\"1.启用rewrite模块\"></a>1.启用rewrite模块</h3><p>&nbsp;&nbsp;&nbsp; 手动启用是在Apache配置文件里把“LoadModule rewrite_module modules&#x2F;mod_rewrite.so”解注释。<br>&nbsp;&nbsp;&nbsp; 一些WAMP套件也提供更方便的模块管理。</p>\n<h3 id=\"2-rewrite规则设置-1\"><a href=\"#2-rewrite规则设置-1\" class=\"headerlink\" title=\"2.rewrite规则设置\"></a>2.rewrite规则设置</h3><p>&nbsp;&nbsp;&nbsp; 找到Apache的虚拟主机配置文件，如Apache-20\\conf\\extra\\httpd-vhosts.conf。<br>&nbsp;&nbsp;&nbsp; 修改要配置的虚拟主机的Directory标签，如：</p>\n<pre><code class=\"hljs\">&lt;Directory G:/PHP/123&gt;\n    #隐藏index.php相关\n    RewriteEngine On\n    RewriteCond %&#123;REQUEST_FILENAME&#125; !-f\n    RewriteCond %&#123;REQUEST_FILENAME&#125; !-d\n    RewriteRule ^(.*)$ index.php/$1 [L]\n    Options FollowSymLinks\n    #访问权限设置\n    #不允许别人修改页面\n    AllowOverride None\n    #依次考察允许和拒绝ip访问的设置情况\n    order allow,deny\n    #允许来自所有ip的访问\n    Allow from all\n    #deny from 202.18 即拒绝来自202.18打头的ip的访问\n&lt;/Directory&gt;\n</code></pre>\n<h3 id=\"3-配置codeigniter-1\"><a href=\"#3-配置codeigniter-1\" class=\"headerlink\" title=\"3.配置codeigniter\"></a>3.配置codeigniter</h3><p>&nbsp;&nbsp;&nbsp; 找到CI文件夹&#x2F;application&#x2F;config&#x2F;config.php。<br>&nbsp;&nbsp;&nbsp; <code>$config[&#39;index_page&#39;] =&quot; index.php &quot;;</code>改写成<code>$config[&#39;index_page&#39;] = &quot;&quot;; </code></p>\n<h3 id=\"4-重启Apache-1\"><a href=\"#4-重启Apache-1\" class=\"headerlink\" title=\"4.重启Apache\"></a>4.重启Apache</h3><p>&nbsp;&nbsp;&nbsp; win下Apache有图形界面，很方便。</p>\n",
            "tags": [
                "nginx",
                "codeigniter",
                "php",
                "IIS7",
                "apache"
            ]
        }
    ]
}